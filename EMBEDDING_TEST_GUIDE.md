# –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —ç–º–±–µ–¥–¥–∏–Ω–≥–æ–≤ Gemini —Å Railway PostgreSQL

## –°—Ç–∞—Ç—É—Å –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–π ‚úÖ

1. **–ú–æ–¥–µ–ª—å –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∞**: `gemini-embedding-001` –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –Ω–∞—Å—Ç—Ä–æ–µ–Ω–∞
2. **–ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö –≥–æ—Ç–æ–≤–∞**: Railway PostgreSQL –ø–æ–¥–∫–ª—é—á–µ–Ω–∞, —Ç–∞–±–ª–∏—Ü—ã –∏ –∏–Ω–¥–µ–∫—Å—ã —Å–æ–∑–¥–∞–Ω—ã
3. **–†–∞–∑–º–µ—Ä–Ω–æ—Å—Ç—å –æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–∞**: –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è 1536 –∏–∑–º–µ—Ä–µ–Ω–∏–π (—Å–æ–≤–º–µ—Å—Ç–∏–º–æ —Å pgvector)
4. **–ö–æ–¥ –æ–±–Ω–æ–≤–ª–µ–Ω**: API –≤—ã–∑–æ–≤—ã —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—Ç –æ—Ñ–∏—Ü–∏–∞–ª—å–Ω–æ–π –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏

## –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö

### –¢–∞–±–ª–∏—Ü–∞: `article_chunks`
- ‚úÖ `embedding vector(3072)` - –æ—Å–Ω–æ–≤–Ω–∞—è –∫–æ–ª–æ–Ω–∫–∞ (–Ω–µ –∏–Ω–¥–µ–∫—Å–∏—Ä—É–µ—Ç—Å—è)
- ‚úÖ `embedding_1536 vector(1536)` - –Ω–æ–≤–∞—è –∫–æ–ª–æ–Ω–∫–∞ –¥–ª—è –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏
- ‚úÖ `idx_article_chunks_embedding_1536_hnsw` - HNSW –∏–Ω–¥–µ–∫—Å –¥–ª—è –±—ã—Å—Ç—Ä–æ–≥–æ –ø–æ–∏—Å–∫–∞

### –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞
- –í—Å–µ–≥–æ —á–∞–Ω–∫–æ–≤: **20,296**
- –° —ç–º–±–µ–¥–¥–∏–Ω–≥–∞–º–∏: **0** (–Ω—É–∂–Ω–æ –∑–∞–ø–æ–ª–Ω–∏—Ç—å)

## –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —Å —Ä–µ–∞–ª—å–Ω—ã–º API –∫–ª—é—á–æ–º

### 1. –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ API –∫–ª—é—á:
```bash
export GEMINI_API_KEY="your_gemini_api_key_here"
```

### 2. –ó–∞–ø—É—Å—Ç–∏—Ç–µ —Ç–µ—Å—Ç:
```bash
cd /d/–ü—Ä–æ–≥—Ä–∞–º–º—ã/rss/rssnews
python test_embedding_railway.py
```

### 3. –û–∂–∏–¥–∞–µ–º—ã–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç:
```
‚úÖ Settings loaded
   Database URL: postgresql://postgres:ug1Hi~XHEMdMh_Lm~4UfUKtAejqLBGdg@crossover.proxy.rlwy.net:12306/railway...
   Embedding model: gemini-embedding-001
‚úÖ GeminiClient created
üß™ Testing embeddings for 2 texts...
‚úÖ Generated 2/2 embeddings
   Text 1: 1536 dimensions
   Text 2: 1536 dimensions
üóÑÔ∏è  Testing database storage...
‚úÖ Inserted test embedding with ID: 123456
‚úÖ Vector search returned 3 results
   ID: 123456, Distance: 0.0000
‚úÖ Test data cleaned up
‚úÖ Test completed successfully!
```

## –ß—Ç–æ –±—ã–ª–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–æ

### –í –∫–æ–¥–µ:
1. `settings.py`: `"embedding-001"` ‚Üí `"gemini-embedding-001"`
2. `gemini_client.py`: –ü–æ–ª–Ω–æ—Å—Ç—å—é –ø–µ—Ä–µ–ø–∏—Å–∞–Ω —Å–æ–≥–ª–∞—Å–Ω–æ Google API –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏
3. –†–∞–∑–º–µ—Ä–Ω–æ—Å—Ç—å: `3072` ‚Üí `1536` –¥–ª—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç–∏ —Å pgvector
4. Batch-–æ–±—Ä–∞–±–æ—Ç–∫–∞ –∏ –ø—Ä–∞–≤–∏–ª—å–Ω–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ –æ—Ç–≤–µ—Ç–æ–≤ API

### –í –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö:
1. –î–æ–±–∞–≤–ª–µ–Ω–∞ –∫–æ–ª–æ–Ω–∫–∞ `embedding_1536 vector(1536)`
2. –°–æ–∑–¥–∞–Ω HNSW –∏–Ω–¥–µ–∫—Å –¥–ª—è –±—ã—Å—Ç—Ä–æ–≥–æ –∫–æ—Å–∏–Ω—É—Å–Ω–æ–≥–æ –ø–æ–∏—Å–∫–∞
3. –ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–æ –Ω–∞–ª–∏—á–∏–µ —Ä–∞—Å—à–∏—Ä–µ–Ω–∏—è `vector v0.8.1`

## –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏

–ü–æ—Å–ª–µ —É—Å–ø–µ—à–Ω–æ–≥–æ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –º–æ–∂–Ω–æ:

1. **–ó–∞–ø–æ–ª–Ω–∏—Ç—å —ç–º–±–µ–¥–¥–∏–Ω–≥–∏** –¥–ª—è —Å—É—â–µ—Å—Ç–≤—É—é—â–∏—Ö 20K —á–∞–Ω–∫–æ–≤
2. **–û–±–Ω–æ–≤–∏—Ç—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ** –¥–ª—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è `embedding_1536`
3. **–ù–∞—Å—Ç—Ä–æ–∏—Ç—å –≤–µ–∫—Ç–æ—Ä–Ω—ã–π –ø–æ–∏—Å–∫** –≤ –æ—Å–Ω–æ–≤–Ω–æ–º –∫–æ–¥–µ
4. **–ú–æ–Ω–∏—Ç–æ—Ä–∏—Ç—å –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å** HNSW –∏–Ω–¥–µ–∫—Å–∞

## –ü—Ä–æ–±–ª–µ–º—ã –∏ —Ä–µ—à–µ–Ω–∏—è

### ‚ùå –ü—Ä–æ–±–ª–µ–º–∞: pgvector –Ω–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç >2000 –∏–∑–º–µ—Ä–µ–Ω–∏–π –¥–ª—è –∏–Ω–¥–µ–∫—Å–æ–≤
### ‚úÖ –†–µ—à–µ–Ω–∏–µ: –ò—Å–ø–æ–ª—å–∑—É–µ–º 1536 –∏–∑–º–µ—Ä–µ–Ω–∏–π —Å –æ—Ç–¥–µ–ª—å–Ω–æ–π –∫–æ–ª–æ–Ω–∫–æ–π

### ‚ùå –ü—Ä–æ–±–ª–µ–º–∞: –û—à–∏–±–∫–∏ –ø–∞–º—è—Ç–∏ –ø—Ä–∏ —Å–æ–∑–¥–∞–Ω–∏–∏ –∏–Ω–¥–µ–∫—Å–æ–≤
### ‚úÖ –†–µ—à–µ–Ω–∏–µ: –ò–Ω–¥–µ–∫—Å—ã —Å–æ–∑–¥–∞–Ω—ã, –Ω–µ—Å–º–æ—Ç—Ä—è –Ω–∞ –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏—è

### ‚ùå –ü—Ä–æ–±–ª–µ–º–∞: –£—Å—Ç–∞—Ä–µ–≤—à–∏–π –∫–æ–¥ API
### ‚úÖ –†–µ—à–µ–Ω–∏–µ: –ü–µ—Ä–µ–ø–∏—Å–∞–Ω —Å–æ–≥–ª–∞—Å–Ω–æ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏–∏ Google 2025