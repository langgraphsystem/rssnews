# ‚úÖ –ß–µ–∫–ª–∏—Å—Ç –≤–Ω–µ–¥—Ä–µ–Ω–∏—è LlamaIndex –≤ –ø—Ä–æ–¥–∞–∫—à–Ω

**–ü–µ—á–∞—Ç–∞–π –∏ –æ—Ç–º–µ—á–∞–π –ø—É–Ω–∫—Ç—ã –ø–æ –º–µ—Ä–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è!**

---

## üîß 1. –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ –æ–∫—Ä—É–∂–µ–Ω–∏—è

### –ë–∞–∑–æ–≤–∞—è —É—Å—Ç–∞–Ω–æ–≤–∫–∞
- [ ] –£—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω LlamaIndex (`pip install -r requirements_llamaindex.txt`)
- [ ] –ü—Ä–æ–≤–µ—Ä–µ–Ω—ã –≤–µ—Ä—Å–∏–∏ Python ‚â•3.8, PostgreSQL ‚â•13, pgvector —Ä–∞—Å—à–∏—Ä–µ–Ω–∏–µ
- [ ] –°–æ–∑–¥–∞–Ω Pinecone –∏–Ω–¥–µ–∫—Å (768 dimensions, cosine metric)

### API –∫–ª—é—á–∏ –∏ –¥–æ—Å—Ç—É–ø—ã
- [ ] –î–æ—Å—Ç—É–ø –∫ API Pinecone –ø–æ–¥—Ç–≤–µ—Ä–∂–¥—ë–Ω (`pinecone.list_indexes()`)
- [ ] –î–æ—Å—Ç—É–ø –∫ Postgres (Railway) –ø–æ–¥—Ç–≤–µ—Ä–∂–¥—ë–Ω (`psql $PG_DSN`)
- [ ] OpenAI API –∫–ª—é—á –∞–∫—Ç–∏–≤–µ–Ω (`curl openai.com/v1/models`)
- [ ] Gemini API –∫–ª—é—á –∞–∫—Ç–∏–≤–µ–Ω (embeddings + LLM)

### –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è .env
- [ ] `PINECONE_API_KEY=pc-...` ‚úÖ
- [ ] `PINECONE_INDEX=rssnews-embeddings` ‚úÖ
- [ ] `PINECONE_REGION=us-east-1-aws` ‚úÖ
- [ ] `OPENAI_API_KEY=sk-...` ‚úÖ
- [ ] `GEMINI_API_KEY=AI...` ‚úÖ
- [ ] `PG_DSN=postgresql://...` ‚úÖ

---

## üóÑÔ∏è 2. –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö –∏ —Å—Ö–µ–º–∞

### –°—Ö–µ–º–∞ LlamaIndex
- [ ] –ü—Ä–∏–º–µ–Ω–µ–Ω–∞ —Å—Ö–µ–º–∞: `psql $PG_DSN -f llamaindex_schema.sql`
- [ ] –¢–∞–±–ª–∏—Ü–∞ `llamaindex_nodes` —Å–æ–∑–¥–∞–Ω–∞ —Å –∏–Ω–¥–µ–∫—Å–∞–º–∏
- [ ] –¢–∞–±–ª–∏—Ü–∞ `llamaindex_queries` –¥–ª—è –∞–Ω–∞–ª–∏—Ç–∏–∫–∏
- [ ] –¢–∞–±–ª–∏—Ü–∞ `llamaindex_costs` –¥–ª—è –±—é–¥–∂–µ—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
- [ ] –¢–∞–±–ª–∏—Ü–∞ `llamaindex_config` –¥–ª—è –Ω–∞—Å—Ç—Ä–æ–µ–∫

### –ò–Ω–¥–µ–∫—Å—ã –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏
- [ ] FTS –∏–Ω–¥–µ–∫—Å: `idx_llamaindex_nodes_fts`
- [ ] Vector –∏–Ω–¥–µ–∫—Å: `idx_llamaindex_nodes_embedding` (pgvector)
- [ ] –ú–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ: `idx_llamaindex_nodes_metadata` (jsonb gin)
- [ ] –í—Ä–µ–º–µ–Ω–Ω—ã–µ: `idx_llamaindex_nodes_created_at`

---

## üìä 3. –î–∞–Ω–Ω—ã–µ –∏ —á–∞–Ω–∫–∏–Ω–≥ (–∑–∞–º–µ–Ω–∞ Stage 6)

### –£–º–Ω—ã–π —á–∞–Ω–∫–∏–Ω–≥
- [ ] –ó–∞–º–µ–Ω—ë–Ω `chunking_simple.py` –Ω–∞ **LlamaIndex SentenceSplitter**
- [ ] –†–∞–∑–º–µ—Ä —á–∞–Ω–∫–∞: 512 —Ç–æ–∫–µ–Ω–æ–≤ (–Ω–∞—Å—Ç—Ä–∞–∏–≤–∞–µ–º–æ)
- [ ] Overlap: 50 —Ç–æ–∫–µ–Ω–æ–≤
- [ ] –ì—Ä–∞–Ω–∏—Ü—ã: –ø–æ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è–º (`paragraph_separator="\n\n"`)

### Unified Node ID
- [ ] –ö–∞–∂–¥—ã–π —á–∞–Ω–∫ –ø–æ–ª—É—á–∞–µ—Ç `node_id = {article_id}#{chunk_index}`
- [ ] –û–¥–∏–Ω–∞–∫–æ–≤—ã–π ID –≤ Postgres –∏ Pinecone
- [ ] –°–≤—è–∑—å —Å `article_chunks` —á–µ—Ä–µ–∑ `article_id`

### –ú–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ —á–∞–Ω–∫–æ–≤
- [ ] **–û–±—è–∑–∞—Ç–µ–ª—å–Ω—ã–µ**: `article_id, chunk_index, title, url, source, published_at`
- [ ] **–ú–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü–∏—è**: `language, namespace` (en/ru, hot/archive)
- [ ] **–ö–∞—á–µ—Å—Ç–≤–æ**: `relevance_score, freshness_score`
- [ ] **–ò–∑–≤–ª–µ—á—ë–Ω–Ω—ã–µ**: `extracted_keywords, extracted_questions, extracted_titles`

---

## üîç 4. –ò–Ω–¥–µ–∫—Å–∞—Ü–∏—è (–∑–∞–º–µ–Ω–∞ Stage 7)

### Pinecone –Ω–∞—Å—Ç—Ä–æ–π–∫–∞
- [ ] Namespaces —Å–æ–∑–¥–∞–Ω—ã: `en_hot, en_archive, ru_hot, ru_archive`
- [ ] Dimension: 768 (Gemini text-embedding-004)
- [ ] Metric: cosine similarity
- [ ] –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–æ

### –î–≤–æ–π–Ω–æ–µ —Ö—Ä–∞–Ω–µ–Ω–∏–µ
- [ ] **Postgres**: FTS –≤–µ–∫—Ç–æ—Ä—ã + –º–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ (–±—ã—Å—Ç—Ä—ã–π –ø–æ–∏—Å–∫ –ø–æ –∫–ª—é—á–µ–≤—ã–º —Å–ª–æ–≤–∞–º)
- [ ] **Pinecone**: —ç–º–±–µ–¥–¥–∏–Ω–≥–∏ Gemini (—Å–µ–º–∞–Ω—Ç–∏—á–µ—Å–∫–∏–π –ø–æ–∏—Å–∫)
- [ ] –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è: –æ–¥–∏–Ω —á–∞–Ω–∫ ‚Üí –æ–±–µ —Å–∏—Å—Ç–µ–º—ã

### –≠–º–±–µ–¥–¥–∏–Ω–≥–∏
- [ ] –í—Å–µ–≥–¥–∞ **Gemini Embeddings** (–∫–æ–Ω—Å–∏—Å—Ç–µ–Ω—Ç–Ω–æ—Å—Ç—å)
- [ ] –ú–æ–¥–µ–ª—å: `text-embedding-004` (768 dim)
- [ ] Batch –æ–±—Ä–∞–±–æ—Ç–∫–∞ –¥–ª—è —ç–∫–æ–Ω–æ–º–∏–∏

---

## üö¶ 5. –ú–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü–∏—è –∏ –ø—Ä–∞–≤–∏–ª–∞

### –ñ—ë—Å—Ç–∫–∏–µ –ø—Ä–∞–≤–∏–ª–∞ (–±–µ–∑ —ç–∫—Å–ø–µ—Ä–∏–º–µ–Ω—Ç–æ–≤)
- [ ] **–≠–º–±–µ–¥–¥–∏–Ω–≥–∏**: –≤—Å–µ–≥–¥–∞ Gemini ‚úÖ
- [ ] **–†–µ—Ç—Ä–∏–≤–µ—Ä**: Hybrid (FTS Postgres + Vector Pinecone) ‚úÖ
- [ ] **LLM –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é**: OpenAI GPT-5 ‚úÖ
- [ ] **–ê–≤—Ç–æ–ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ –Ω–∞ Gemini**: –¥–ª–∏–Ω–Ω—ã–π –∫–æ–Ω—Ç–µ–∫—Å—Ç, –ª–∏–º–∏—Ç—ã OpenAI, RU —Ç–µ–∫—Å—Ç—ã ‚úÖ

### –í—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫–Ω–∞ (namespaces)
- [ ] **hot** (7‚Äì30 –¥–Ω–µ–π): –ø–æ–∏—Å–∫ –ø–µ—Ä–≤—ã–º
- [ ] **archive** (—Å—Ç–∞—Ä—à–µ 30 –¥–Ω–µ–π): –¥–æ–≥—Ä—É–∂–∞–µ—Ç—Å—è –ø—Ä–∏ –Ω–µ—Ö–≤–∞—Ç–∫–µ —Ñ–∞–∫—Ç–æ–≤
- [ ] –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –º–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü–∏—è –ø–æ `published_at`

### –Ø–∑—ã–∫–æ–≤–æ–µ —Ä–∞–∑–¥–µ–ª–µ–Ω–∏–µ
- [ ] EN/RU —Ä–∞–∑–¥–µ–ª—å–Ω—ã–µ –∏–Ω–¥–µ–∫—Å—ã
- [ ] –ê–≤—Ç–æ–æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ —è–∑—ã–∫–∞ –∑–∞–ø—Ä–æ—Å–∞ (Cyrillic vs Latin)
- [ ] Router: —è–∑—ã–∫ –∑–∞–ø—Ä–æ—Å–∞ ‚Üí —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏–π namespace

---

## üîÑ 6. –ü–æ–∏—Å–∫ –∏ —Ä–µ—Ç—Ä–∏–≤–∞–ª (–∑–∞–º–µ–Ω–∞ Stage 8)

### Hybrid Retrieval
- [ ] **FTS (Postgres)**: –ø–æ–∏—Å–∫ –ø–æ –∫–ª—é—á–µ–≤—ã–º —Å–ª–æ–≤–∞–º (BM25-like)
- [ ] **Vector (Pinecone)**: —Å–µ–º–∞–Ω—Ç–∏—á–µ—Å–∫–∏–π –ø–æ–∏—Å–∫
- [ ] **Alpha**: 0.5 –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é (50/50), –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞–µ–º–æ
- [ ] **–ö–æ–º–±–∏–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ**: –Ω–æ—Ä–º–∞–ª–∏–∑–∞—Ü–∏—è —Å–∫–æ—Ä–æ–≤ + weighted sum

### –ü–æ—Å—Ç–æ–±—Ä–∞–±–æ—Ç–∫–∞ (pipeline)
- [ ] **Similarity filter**: –æ—Ç—Å–µ–∫–∞—Ç—å —Å–ª–∞–±—ã–µ —Å–æ–≤–ø–∞–¥–µ–Ω–∏—è (score < 0.6)
- [ ] **Domain diversification**: max 1‚Äì2 –∫—É—Å–∫–∞/–¥–æ–º–µ–Ω –≤ —Ñ–∏–Ω–∞–ª—å–Ω–æ–º top-N
- [ ] **Freshness boost**: —Å—Ç–∞—Ç—å–∏ ‚â§7 –¥–Ω–µ–π –ø–æ–ª—É—á–∞—é—Ç +20% –∫ —Å–∫–æ—Ä—É
- [ ] **Semantic rerank**: top-24 ‚Üí —Ñ–∏–Ω–∞–ª—å–Ω—ã–µ 8‚Äì10 —á–µ—Ä–µ–∑ cross-encoder

### –ü–æ–∏—Å–∫ —Å—Ç—Ä–∞—Ç–µ–≥–∏—è
- [ ] –°–Ω–∞—á–∞–ª–∞ –ø–æ–∏—Å–∫ –≤ `hot` namespace
- [ ] –ï—Å–ª–∏ —Ñ–∞–∫—Ç–æ–≤ –º–∞–ª–æ (< min_sources) ‚Üí –¥–æ–≥—Ä—É–∂–∞–µ–º –∏–∑ `archive`
- [ ] –ò—Ç–æ–≥–æ top-K: 24 –¥–æ rerank ‚Üí 8‚Äì12 —Ñ–∏–Ω–∞–ª

---

## üìù 7. –ü—Ä–µ—Å–µ—Ç—ã —Ñ–æ—Ä–º–∞—Ç–æ–≤ –≤—ã–≤–æ–¥–∞

### digest (–Ω–æ–≤–æ—Å—Ç–Ω—ã–µ —Å–≤–æ–¥–∫–∏)
- [ ] **–û–∫–Ω–æ**: 7‚Äì14 –¥–Ω–µ–π
- [ ] **–ò—Å—Ç–æ—á–Ω–∏–∫–∏**: K=24 ‚Üí —Ñ–∏–Ω–∞–ª 10‚Äì12
- [ ] **–î–æ–º–µ–Ω—ã**: ‚â•3 —Ä–∞–∑–Ω—ã—Ö
- [ ] **–§–æ—Ä–º–∞—Ç**: —Å–ø–∏—Å–æ–∫ —Å 1‚Äì2 –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è–º–∏ + —Å—Å—ã–ª–∫–∞ + –¥–∞—Ç–∞

### qa (–≤–æ–ø—Ä–æ—Å-–æ—Ç–≤–µ—Ç)
- [ ] **–û–∫–Ω–æ**: 30 –¥–Ω–µ–π –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é
- [ ] **–ò—Å—Ç–æ—á–Ω–∏–∫–∏**: K=24 ‚Üí 8‚Äì10
- [ ] **–§–æ—Ä–º–∞—Ç**: –∫—Ä–∞—Ç–∫–∏–π –æ—Ç–≤–µ—Ç + –∏—Å—Ç–æ—á–Ω–∏–∫–∏
- [ ] **Self-check**: –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ –ø—Ä–∏ <3 –∏—Å—Ç–æ—á–Ω–∏–∫–æ–≤

### shorts (—Å—Ü–µ–Ω–∞—Ä–∏–∏ –≤–∏–¥–µ–æ)
- [ ] **–û–∫–Ω–æ**: 30‚Äì90 –¥–Ω–µ–π
- [ ] **–ò—Å—Ç–æ—á–Ω–∏–∫–∏**: K=24 ‚Üí 6‚Äì8
- [ ] **–§–æ—Ä–º–∞—Ç**: hook ‚Üí 3‚Äì5 –∫–ª—é—á–µ–≤—ã—Ö —Ç–µ–∑–∏—Å–æ–≤ (30-60 —Å–µ–∫) ‚Üí CTA + –∏—Å—Ç–æ—á–Ω–∏–∫–∏

### ideas (—à–∏—Ä–æ–∫–æ–µ –∏—Å—Å–ª–µ–¥–æ–≤–∞–Ω–∏–µ)
- [ ] **–û–∫–Ω–æ**: 30‚Äì90 –¥–Ω–µ–π, —Ñ–∏–ª—å—Ç—Ä –ø–æ tags/–∫–∞—Ç–µ–≥–æ—Ä–∏—è–º
- [ ] **–ò—Å—Ç–æ—á–Ω–∏–∫–∏**: K=40 ‚Üí 12‚Äì15 (–±–æ–ª—å—à–µ –¥–ª—è –∞–Ω–∞–ª–∏–∑–∞)
- [ ] **–§–æ—Ä–º–∞—Ç**: —Ç—Ä–µ–Ω–¥—ã ‚Üí —Å–≤—è–∑–∏ –º–µ–∂–¥—É –∏—Å—Ç–æ—á–Ω–∏–∫–∞–º–∏ ‚Üí –ø—Ä–æ–≥–Ω–æ–∑—ã ‚Üí –¥–∏–≤–µ—Ä—Å–Ω—ã–µ –ø–µ—Ä—Å–ø–µ–∫—Ç–∏–≤—ã

---

## üõ°Ô∏è 8. –ê–Ω—Ç–∏-–≥–∞–ª–ª—é—Ü–∏–Ω–∞—Ü–∏–∏ –∏ grounding

### Grounded –æ—Ç–≤–µ—Ç—ã
- [ ] –û—Ç–≤–µ—Ç **—Ç–æ–ª—å–∫–æ** –ø–æ –∏–∑–≤–ª–µ—á—ë–Ω–Ω—ã–º —á–∞–Ω–∫–∞–º (no hallucination)
- [ ] –ö–∞–∂–¥—ã–π —Ñ–∞–∫—Ç ‚Äî –º–∏–Ω–∏–º—É–º –æ–¥–Ω–∞ —Å—Å—ã–ª–∫–∞
- [ ] –ü—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–µ –ø—Ä–∏ –Ω–µ–¥–æ—Å—Ç–∞—Ç–∫–µ –∏—Å—Ç–æ—á–Ω–∏–∫–æ–≤
- [ ] –Ø–≤–Ω–æ–µ —É–∫–∞–∑–∞–Ω–∏–µ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–π –ø–æ–∏—Å–∫–∞

### Source attribution
- [ ] –ö–∞–∂–¥—ã–π —Ñ–∏–Ω–∞–ª—å–Ω—ã–π —á–∞–Ω–∫: `title, url, source_domain, published_at`
- [ ] Relevance score –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
- [ ] Preview —Ç–µ–∫—Å—Ç–∞ (–ø–µ—Ä–≤—ã–µ 200 —Å–∏–º–≤–æ–ª–æ–≤)

---

## üí∞ 9. –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –∏ cost control

### Top-K –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è
- [ ] **Retrieval**: 24 —á–∞–Ω–∫–∞ (—É–º–µ—Ä–µ–Ω–Ω–æ –¥–ª—è —Å–∫–æ—Ä–æ—Å—Ç–∏)
- [ ] **Final**: 8‚Äì12 (–¥–µ—Ä–∂–∏—Ç quality vs. speed)
- [ ] –ù–∞—Å—Ç—Ä–∞–∏–≤–∞–µ–º—ã–µ –ª–∏–º–∏—Ç—ã –ø–æ –ø—Ä–µ—Å–µ—Ç–∞–º

### –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ
- [ ] **Query cache**: 10‚Äì15 –º–∏–Ω—É—Ç TTL
- [ ] **Cache key**: query + preset + language + max_sources (MD5)
- [ ] **LRU eviction**: –ø—Ä–∏ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏–∏ max_size
- [ ] **Cache hit rate** –º–æ–Ω–∏—Ç–æ—Ä–∏—Ç—Å—è

### Cost guards (–±—é–¥–∂–µ—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ)
- [ ] **–î–Ω–µ–≤–Ω—ã–µ –ª–∏–º–∏—Ç—ã**: OpenAI $50, Gemini $30, total $100
- [ ] **–¢–æ–∫–µ–Ω –ª–∏–º–∏—Ç—ã** –Ω–∞ —Å–∏–Ω—Ç–µ–∑ (–ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–µ–Ω–∏–µ runaway)
- [ ] **–ê–≤—Ç–æ–ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ** –Ω–∞ –¥–µ—à—ë–≤—É—é –º–æ–¥–µ–ª—å –ø—Ä–∏ –ø—Ä–∏–±–ª–∏–∂–µ–Ω–∏–∏ –∫ –ª–∏–º–∏—Ç—É
- [ ] **Alerting** –ø—Ä–∏ –¥–æ—Å—Ç–∏–∂–µ–Ω–∏–∏ 80% –ª–∏–º–∏—Ç–∞

---

## üìä 10. –ù–∞–±–ª—é–¥–∞–µ–º–æ—Å—Ç—å –∏ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ

### Query logging
- [ ] **–ó–∞–ø—Ä–æ—Å**: —Ç–µ–∫—Å—Ç, hash, —è–∑—ã–∫, –ø—Ä–µ—Å–µ—Ç
- [ ] **–†–µ–∑—É–ª—å—Ç–∞—Ç**: `retrieved_node_ids, used_node_ids, response_length`
- [ ] **Performance**: –≤—Ä–µ–º—è –æ–±—Ä–∞–±–æ—Ç–∫–∏, cache_hit, provider
- [ ] **Quality**: –¥–∏–≤–µ—Ä—Å–∏—Ñ–∏–∫–∞—Ü–∏—è –¥–æ–º–µ–Ω–æ–≤, —Å—Ä–µ–¥–Ω—è—è —Å–≤–µ–∂–µ—Å—Ç—å, relevance

### Cost tracking
- [ ] **Daily/hourly aggregates**: –ø–æ –ø—Ä–æ–≤–∞–π–¥–µ—Ä–∞–º (OpenAI, Gemini, embeddings)
- [ ] **Usage counts**: –∑–∞–ø—Ä–æ—Å—ã, processed nodes, embeddings created
- [ ] **Budget status**: spent vs. limits, alerts sent

### Performance monitoring
- [ ] **Operation timing**: ingest, query, migrate (–ø–æ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞–º)
- [ ] **Success rates**: error counting –ø–æ —Ç–∏–ø–∞–º
- [ ] **Resource usage**: memory, concurrent operations

### Analytics views
- [ ] `llamaindex_daily_costs`: –¥–Ω–µ–≤–Ω—ã–µ —Ä–∞—Å—Ö–æ–¥—ã + –ª–∏–º–∏—Ç—ã
- [ ] `llamaindex_query_stats`: –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å –ø–æ –ø—Ä–µ—Å–µ—Ç–∞–º/—è–∑—ã–∫–∞–º
- [ ] `llamaindex_node_distribution`: —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –ø–æ namespace/—è–∑—ã–∫–∞–º
- [ ] `llamaindex_performance_summary`: –æ—à–∏–±–∫–∏, latency P95

---

## üöÄ 11. –ü–æ—ç—Ç–∞–ø–Ω–æ–µ –≤–Ω–µ–¥—Ä–µ–Ω–∏–µ

### Phase 1: –ü–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ–µ —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ (1-2 –Ω–µ–¥–µ–ª–∏)
- [ ] LlamaIndex —Ä–∞–±–æ—Ç–∞–µ—Ç **–ø–∞—Ä–∞–ª–ª–µ–ª—å–Ω–æ** —Å —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–π —Å–∏—Å—Ç–µ–º–æ–π
- [ ] –û–±—Ä–∞–±–æ—Ç–∫–∞: 100‚Äì500 —Å—Ç–∞—Ç–µ–π –¥–ª—è —Å—Ä–∞–≤–Ω–µ–Ω–∏—è –∫–∞—á–µ—Å—Ç–≤–∞
- [ ] A/B comparison: —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã LlamaIndex vs. legacy Stage 6-8
- [ ] –ú–µ—Ç—Ä–∏–∫–∏: precision, recall, user satisfaction

### Phase 2: –°–µ–ª–µ–∫—Ç–∏–≤–Ω–∞—è –∑–∞–º–µ–Ω–∞ (2-4 –Ω–µ–¥–µ–ª–∏)
- [ ] **–ù–æ–≤—ã–µ —Å—Ç–∞—Ç—å–∏** –∏–¥—É—Ç —á–µ—Ä–µ–∑ LlamaIndex SentenceSplitter
- [ ] **Stage 7-8** –ø–æ–∫–∞ –æ—Å—Ç–∞—é—Ç—Å—è legacy (–¥–ª—è —Å—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç–∏)
- [ ] **Backfill**: —Å–≤–µ–∂–∏–µ —Å—Ç–∞—Ç—å–∏ (30 –¥–Ω–µ–π) –≤ `hot` namespace
- [ ] **–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥**: –∫–∞—á–µ—Å—Ç–≤–æ —á–∞–Ω–∫–∏–Ω–≥–∞, performance

### Phase 3: –ü–æ–ª–Ω–∞—è –∑–∞–º–µ–Ω–∞ (4-8 –Ω–µ–¥–µ–ª—å)
- [ ] **Retrieval** –ø–µ—Ä–µ–∫–ª—é—á—ë–Ω –Ω–∞ Hybrid LlamaIndex
- [ ] **Synthesis** —á–µ—Ä–µ–∑ –ø—Ä–µ—Å–µ—Ç—ã (digest/qa/shorts/ideas)
- [ ] **Migration**: –≤—Å–µ —Å—Ç–∞—Ä—ã–µ —Å—Ç–∞—Ç—å–∏ –≤ `archive`
- [ ] **Legacy Mode**: –≥–æ—Ç–æ–≤ –¥–ª—è —ç–∫—Å—Ç—Ä–µ–Ω–Ω–æ–≥–æ –æ—Ç–∫–∞—Ç–∞

---

## üîß 12. Legacy Mode –∏ –∞–≤–∞—Ä–∏–π–Ω—ã–π –ø–ª–∞–Ω

### –ö–Ω–æ–ø–∫–∞ "Legacy Mode"
- [ ] **–ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è**: –æ–¥–Ω–∞ –∫–æ–º–∞–Ω–¥–∞ `python main.py llamaindex-legacy enable`
- [ ] **–ö–æ–º–ø–æ–Ω–µ–Ω—Ç–Ω—ã–π –æ—Ç–∫–∞—Ç**: –º–æ–∂–Ω–æ –≤–∫–ª—é—á–∏—Ç—å legacy —Ç–æ–ª—å–∫–æ –¥–ª—è chunking/retrieval/synthesis
- [ ] **–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥**: —Å—Ç–∞—Ç—É—Å legacy —Ä–µ–∂–∏–º–∞ –≤ dashboard

### Rollback –ø—Ä–æ—Ü–µ–¥—É—Ä–∞ (–µ—Å–ª–∏ —á—Ç–æ-—Ç–æ —Å–ª–æ–º–∞–ª–æ—Å—å)
- [ ] **–®–∞–≥ 1**: `llamaindex-legacy enable --components full`
- [ ] **–®–∞–≥ 2**: –ü–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ —Ç—Ä–∞—Ñ–∏–∫–∞ –Ω–∞ —Å—Ç–∞—Ä—ã–π Stage 6-8
- [ ] **–®–∞–≥ 3**: –ê–Ω–∞–ª–∏–∑ –ø—Ä–æ–±–ª–µ–º—ã –≤ –ª–æ–≥–∞—Ö `llamaindex_performance`
- [ ] **–®–∞–≥ 4**: –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ ‚Üí —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ ‚Üí –ø–æ–≤—Ç–æ—Ä–Ω–æ–µ –≤–∫–ª—é—á–µ–Ω–∏–µ

### –î–æ–∫—É–º–µ–Ω—Ç–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –ø–ª–∞–Ω –æ—Ç–∫–∞—Ç–∞
- [ ] **SLA**: –º–∞–∫—Å–∏–º—É–º 10 –º–∏–Ω—É—Ç –Ω–∞ –æ—Ç–∫–∞—Ç –∫ legacy
- [ ] **–ü—Ä–æ—Ü–µ–¥—É—Ä—ã**: –ø–æ—à–∞–≥–æ–≤—ã–π —Å–ø–∏—Å–æ–∫ –∫–æ–º–∞–Ω–¥
- [ ] **–û—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω—ã–µ**: –∫—Ç–æ –ø—Ä–∏–Ω–∏–º–∞–µ—Ç —Ä–µ—à–µ–Ω–∏–µ –æ–± –æ—Ç–∫–∞—Ç–µ
- [ ] **Escalation**: –∫–æ–≥–¥–∞ –≤—ã–∑—ã–≤–∞—Ç—å –≤–Ω–µ—à–Ω—é—é –ø–æ–¥–¥–µ—Ä–∂–∫—É

---

## üìä 13. –î–∞—à–±–æ—Ä–¥ –∏ –∞–ª–µ—Ä—Ç—ã

### Key metrics –Ω–∞ –¥–∞—à–±–æ—Ä–¥–µ
- [ ] **Latency**: P50, P95, P99 –ø–æ –æ–ø–µ—Ä–∞—Ü–∏—è–º (retrieval, synthesis)
- [ ] **Cost**: –¥–Ω–µ–≤–Ω—ã–µ —Ä–∞—Å—Ö–æ–¥—ã vs. –ª–∏–º–∏—Ç—ã, —Ç—Ä–µ–Ω–¥—ã
- [ ] **Quality**: –¥–∏–≤–µ—Ä—Å–∏—Ñ–∏–∫–∞—Ü–∏—è, —Å–≤–µ–∂–µ—Å—Ç—å, cache hit rate
- [ ] **Errors**: –ø—Ä–æ—Ü–µ–Ω—Ç –æ—à–∏–±–æ–∫ –ø–æ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞–º, —Ç–æ–ø-5 –æ—à–∏–±–æ–∫

### Alerting
- [ ] **Cost alerts**: 80% –æ—Ç –¥–Ω–µ–≤–Ω–æ–≥–æ –ª–∏–º–∏—Ç–∞
- [ ] **Performance alerts**: P95 latency > 5 —Å–µ–∫—É–Ω–¥
- [ ] **Error alerts**: >5% –æ—à–∏–±–æ–∫ –∑–∞ 10 –º–∏–Ω—É—Ç
- [ ] **Capacity alerts**: Pinecone quota, Postgres connections

---

## ‚úÖ 14. –§–∏–Ω–∞–ª—å–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞

### Smoke test –ø–æ–ª–Ω–æ–π —Å–∏—Å—Ç–µ–º—ã
- [ ] **Ingestion**: `python main.py llamaindex-ingest --limit 10`
- [ ] **Query test**: –≤—Å–µ 4 –ø—Ä–µ—Å–µ—Ç–∞ —Ä–∞–±–æ—Ç–∞—é—Ç
- [ ] **Monitoring**: `python main.py llamaindex-monitor` –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –º–µ—Ç—Ä–∏–∫–∏
- [ ] **Legacy toggle**: –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–µ —Ä–∞–±–æ—Ç–∞–µ—Ç –∑–∞ <30 —Å–µ–∫—É–Ω–¥

### Production readiness
- [ ] **Documentation**: LLAMAINDEX_SETUP.md –∑–∞–ø–æ–ª–Ω–µ–Ω–∞
- [ ] **Runbooks**: –ø—Ä–æ—Ü–µ–¥—É—Ä—ã troubleshooting –≥–æ—Ç–æ–≤—ã
- [ ] **Team training**: –∫–æ–º–∞–Ω–¥–∞ –∑–Ω–∞–µ—Ç –Ω–æ–≤—ã–µ –∫–æ–º–∞–Ω–¥—ã
- [ ] **Backup plan**: legacy —Ä–µ–∂–∏–º –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω

### Go/No-go –∫—Ä–∏—Ç–µ—Ä–∏–∏
- [ ] **Performance**: latency ‚â§ —Ç–µ–∫—É—â–µ–π —Å–∏—Å—Ç–µ–º—ã
- [ ] **Quality**: precision/recall ‚â• —Ç–µ–∫—É—â–µ–π —Å–∏—Å—Ç–µ–º—ã
- [ ] **Reliability**: error rate ‚â§ 1%
- [ ] **Cost**: –≤ —Ä–∞–º–∫–∞—Ö –∑–∞–ø–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–Ω–æ–≥–æ –±—é–¥–∂–µ—Ç–∞

---

## üéØ **PROD READY!**

**–ö–æ–≥–¥–∞ –≤—Å–µ –≥–∞–ª–æ—á–∫–∏ ‚úÖ –ø–æ—Å—Ç–∞–≤–ª–µ–Ω—ã ‚Äî —Å–∏—Å—Ç–µ–º–∞ –≥–æ—Ç–æ–≤–∞ –∫ production!**

---

### –ö–æ–º–∞–Ω–¥—ã –¥–ª—è –±—ã—Å—Ç—Ä–æ–π –ø—Ä–æ–≤–µ—Ä–∫–∏:

```bash
# –ü–æ–ª–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ —Å–∏—Å—Ç–µ–º—ã
python setup_llamaindex.py

# –°—Ç–∞—Ç—É—Å –≤—Å–µ—Ö –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤
python main.py llamaindex-monitor

# –¢–µ—Å—Ç –≤—Å–µ—Ö –ø—Ä–µ—Å–µ—Ç–æ–≤
python main.py llamaindex-query "latest tech news" --preset qa
python main.py llamaindex-query "this week digest" --preset digest
python main.py llamaindex-query "video about AI" --preset shorts
python main.py llamaindex-query "future of robotics" --preset ideas

# –í–∫–ª—é—á–∏—Ç—å legacy –ø—Ä–∏ –ø—Ä–æ–±–ª–µ–º–∞—Ö
python main.py llamaindex-legacy enable
```

**üöÄ –ì–æ—Ç–æ–≤–æ –∫ –∑–∞–ø—É—Å–∫—É!**